{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yilmaz/WebstormProjects/onething/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yilmaz/WebstormProjects/onething/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/yilmaz/WebstormProjects/onething/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yilmaz/WebstormProjects/onething/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yilmaz/WebstormProjects/onething/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yilmaz/WebstormProjects/onething/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yilmaz/WebstormProjects/onething/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,createContext,useContext}from'react';import createAuth0Client from'@auth0/auth0-spa-js';// create the context\nexport var Auth0Context=createContext();export var useAuth0=function useAuth0(){return useContext(Auth0Context);};// create a provider\nexport var Auth0Provider=/*#__PURE__*/function(_Component){_inherits(Auth0Provider,_Component);function Auth0Provider(){var _getPrototypeOf2;var _this;_classCallCheck(this,Auth0Provider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Auth0Provider)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={auth0Client:null,isLoading:true,isAuthenticated:false,user:null};_this.config={domain:'dev-mp2cenf2.eu.auth0.com',client_id:'PhlytlbcTOMV2NL8CEsQhR81EQntXdTa',redirect_uri:'https://onebigthing.herokuapp.com/homescreen'};_this.initializeAuth0=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var auth0Client,isAuthenticated,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createAuth0Client(_this.config);case 2:auth0Client=_context.sent;_this.setState({auth0Client:auth0Client});// check to see if they have been redirected after login\nif(!window.location.search.includes('code=')){_context.next=6;break;}return _context.abrupt(\"return\",_this.handleRedirectCallback());case 6:_context.next=8;return auth0Client.isAuthenticated();case 8:isAuthenticated=_context.sent;if(!isAuthenticated){_context.next=15;break;}_context.next=12;return auth0Client.getUser();case 12:_context.t0=_context.sent;_context.next=16;break;case 15:_context.t0=null;case 16:user=_context.t0;_this.setState({isLoading:false,isAuthenticated:isAuthenticated,user:user});case 18:case\"end\":return _context.stop();}}},_callee);}));_this.handleRedirectCallback=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({isLoading:true});_context2.next=3;return _this.state.auth0Client.handleRedirectCallback();case 3:_context2.next=5;return _this.state.auth0Client.getUser();case 5:user=_context2.sent;_this.setState({user:user,isAuthenticated:true,isLoading:false});window.history.replaceState({},document.title,window.location.pathname);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(Auth0Provider,[{key:\"componentDidMount\",value:function componentDidMount(){this.initializeAuth0();}// initialize the auth0 library\n},{key:\"render\",value:function render(){var _this$state=this.state,auth0Client=_this$state.auth0Client,isLoading=_this$state.isLoading,isAuthenticated=_this$state.isAuthenticated,user=_this$state.user;var children=this.props.children;var configObject={isLoading:isLoading,isAuthenticated:isAuthenticated,user:user,loginWithRedirect:function loginWithRedirect(){return auth0Client.loginWithRedirect.apply(auth0Client,arguments);},getTokenSilently:function getTokenSilently(){return auth0Client.getTokenSilently.apply(auth0Client,arguments);},getIdTokenClaims:function getIdTokenClaims(){return auth0Client.getIdTokenClaims.apply(auth0Client,arguments);},logout:function logout(){return auth0Client.logout.apply(auth0Client,arguments);}};return React.createElement(Auth0Context.Provider,{value:configObject},children);}}]);return Auth0Provider;}(Component);","map":{"version":3,"sources":["/Users/yilmaz/WebstormProjects/onething/src/contexts/auth0-context.js"],"names":["React","Component","createContext","useContext","createAuth0Client","Auth0Context","useAuth0","Auth0Provider","state","auth0Client","isLoading","isAuthenticated","user","config","domain","client_id","redirect_uri","initializeAuth0","setState","window","location","search","includes","handleRedirectCallback","getUser","history","replaceState","document","title","pathname","children","props","configObject","loginWithRedirect","getTokenSilently","getIdTokenClaims","logout"],"mappings":"i2BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,aAA3B,CAA0CC,UAA1C,KAA4D,OAA5D,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,CAEA;AACA,MAAO,IAAMC,CAAAA,YAAY,CAAGH,aAAa,EAAlC,CACP,MAAO,IAAMI,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,SAAMH,CAAAA,UAAU,CAACE,YAAD,CAAhB,EAAjB,CAEP;AACA,UAAaE,CAAAA,aAAb,2ZACIC,KADJ,CACY,CACJC,WAAW,CAAE,IADT,CAEJC,SAAS,CAAE,IAFP,CAGJC,eAAe,CAAE,KAHb,CAIJC,IAAI,CAAE,IAJF,CADZ,OAOIC,MAPJ,CAOa,CACLC,MAAM,CAAE,2BADH,CAELC,SAAS,CAAE,kCAFN,CAGLC,YAAY,CAAE,8CAHT,CAPb,OAkBIC,eAlBJ,sEAkBsB,8LACYb,CAAAA,iBAAiB,CAAC,MAAKS,MAAN,CAD7B,QACRJ,WADQ,eAEd,MAAKS,QAAL,CAAc,CAAET,WAAW,CAAXA,WAAF,CAAd,EAEA;AAJc,IAKVU,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,QAAvB,CAAgC,OAAhC,CALU,yDAMH,MAAKC,sBAAL,EANG,+BASgBd,CAAAA,WAAW,CAACE,eAAZ,EAThB,QASRA,eATQ,mBAUDA,eAVC,iDAUuBF,CAAAA,WAAW,CAACe,OAAZ,EAVvB,8EAU+C,IAV/C,SAURZ,IAVQ,aAWd,MAAKM,QAAL,CAAc,CAAER,SAAS,CAAE,KAAb,CAAoBC,eAAe,CAAfA,eAApB,CAAqCC,IAAI,CAAJA,IAArC,CAAd,EAXc,uDAlBtB,SAgCIW,sBAhCJ,sEAgC6B,iJACrB,MAAKL,QAAL,CAAc,CAAER,SAAS,CAAE,IAAb,CAAd,EADqB,uBAGf,OAAKF,KAAL,CAAWC,WAAX,CAAuBc,sBAAvB,EAHe,+BAIF,OAAKf,KAAL,CAAWC,WAAX,CAAuBe,OAAvB,EAJE,QAIfZ,IAJe,gBAMrB,MAAKM,QAAL,CAAc,CAAEN,IAAI,CAAJA,IAAF,CAAQD,eAAe,CAAE,IAAzB,CAA+BD,SAAS,CAAE,KAA1C,CAAd,EACAS,MAAM,CAACM,OAAP,CAAeC,YAAf,CAA4B,EAA5B,CAAgCC,QAAQ,CAACC,KAAzC,CAAgDT,MAAM,CAACC,QAAP,CAAgBS,QAAhE,EAPqB,wDAhC7B,wGAawB,CAChB,KAAKZ,eAAL,GACH,CAED;AAjBJ,uCA0Ca,iBACqD,KAAKT,KAD1D,CACGC,WADH,aACGA,WADH,CACgBC,SADhB,aACgBA,SADhB,CAC2BC,eAD3B,aAC2BA,eAD3B,CAC4CC,IAD5C,aAC4CA,IAD5C,IAEGkB,CAAAA,QAFH,CAEgB,KAAKC,KAFrB,CAEGD,QAFH,CAIL,GAAME,CAAAA,YAAY,CAAG,CACjBtB,SAAS,CAATA,SADiB,CAEjBC,eAAe,CAAfA,eAFiB,CAGjBC,IAAI,CAAJA,IAHiB,CAIjBqB,iBAAiB,CAAE,mCAAUxB,CAAAA,WAAW,CAACwB,iBAAZ,OAAAxB,WAAW,WAArB,EAJF,CAKjByB,gBAAgB,CAAE,kCAAUzB,CAAAA,WAAW,CAACyB,gBAAZ,OAAAzB,WAAW,WAArB,EALD,CAMjB0B,gBAAgB,CAAE,kCAAU1B,CAAAA,WAAW,CAAC0B,gBAAZ,OAAA1B,WAAW,WAArB,EAND,CAOjB2B,MAAM,CAAE,wBAAU3B,CAAAA,WAAW,CAAC2B,MAAZ,OAAA3B,WAAW,WAArB,EAPS,CAArB,CAUA,MACI,qBAAC,YAAD,CAAc,QAAd,EAAuB,KAAK,CAAEuB,YAA9B,EAA6CF,QAA7C,CADJ,CAGH,CA3DL,2BAAmC7B,SAAnC","sourcesContent":["import React, { Component, createContext, useContext } from 'react';\nimport createAuth0Client from '@auth0/auth0-spa-js';\n\n// create the context\nexport const Auth0Context = createContext();\nexport const useAuth0 = () => useContext(Auth0Context);\n\n// create a provider\nexport class Auth0Provider extends Component {\n    state = {\n        auth0Client: null,\n        isLoading: true,\n        isAuthenticated: false,\n        user: null\n    };\n    config = {\n        domain: 'dev-mp2cenf2.eu.auth0.com',\n        client_id: 'PhlytlbcTOMV2NL8CEsQhR81EQntXdTa',\n        redirect_uri: 'https://onebigthing.herokuapp.com/homescreen'\n    };\n\n    componentDidMount() {\n        this.initializeAuth0();\n    }\n\n    // initialize the auth0 library\n    initializeAuth0 = async () => {\n        const auth0Client = await createAuth0Client(this.config);\n        this.setState({ auth0Client });\n\n        // check to see if they have been redirected after login\n        if (window.location.search.includes('code=')) {\n            return this.handleRedirectCallback();\n        }\n\n        const isAuthenticated = await auth0Client.isAuthenticated();\n        const user = isAuthenticated ? await auth0Client.getUser() : null;\n        this.setState({ isLoading: false, isAuthenticated, user });\n    };\n\n    handleRedirectCallback = async () => {\n        this.setState({ isLoading: true });\n\n        await this.state.auth0Client.handleRedirectCallback();\n        const user = await this.state.auth0Client.getUser();\n\n        this.setState({ user, isAuthenticated: true, isLoading: false });\n        window.history.replaceState({}, document.title, window.location.pathname);\n    };\n\n    render() {\n        const { auth0Client, isLoading, isAuthenticated, user } = this.state;\n        const { children } = this.props;\n\n        const configObject = {\n            isLoading,\n            isAuthenticated,\n            user,\n            loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\n            getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\n            getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n            logout: (...p) => auth0Client.logout(...p)\n        };\n\n        return (\n            <Auth0Context.Provider value={configObject}>{children}</Auth0Context.Provider>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}